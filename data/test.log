/*C5*/SET SCHEMA PUBLIC
DISCONNECT
/*C6*/SET SCHEMA PUBLIC
DISCONNECT
/*C7*/SET SCHEMA PUBLIC
drop table if exists Message CASCADE 
drop table if exists Ticket CASCADE 
drop table if exists Ticket_tags CASCADE 
drop table if exists User CASCADE 
drop sequence hibernate_sequence if exists
create sequence hibernate_sequence start with 1 increment by 1
create table Message (id bigint not null, content varchar(255), date timestamp, relatedTicket_id bigint, sender_id bigint, primary key (id))
create table Ticket (id bigint not null, closingDate timestamp, creationDate timestamp, description varchar(255), status varchar(255), title varchar(255), assignee_id bigint, reporter_id bigint, primary key (id))
create table Ticket_tags (Ticket_id bigint not null, tags varchar(255))
create table User (id bigint not null, name varchar(255), registrationDate date, primary key (id))
alter table Message add constraint FKhdgisnj2in5hn1n2yuldo2w14 foreign key (relatedTicket_id) references Ticket
alter table Message add constraint FKcrnfc5k5lxdfurq3b97o52dnv foreign key (sender_id) references User
alter table Ticket add constraint FKntskyed7i8bg5tlegidku3i95 foreign key (assignee_id) references User
alter table Ticket add constraint FKs7n7hwlga5n5f2an052lkv1st foreign key (reporter_id) references User
alter table Ticket_tags add constraint FKjn4gvkvm2yfq6c901vmwl55j8 foreign key (Ticket_id) references Ticket
INSERT INTO USER VALUES(1,'Tristan','2023-03-11')
INSERT INTO USER VALUES(2,'Julien','2023-03-11')
INSERT INTO USER VALUES(3,'Johan','2023-03-11')
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 4
COMMIT
DISCONNECT
/*C8*/SET SCHEMA PUBLIC
drop table if exists Message CASCADE 
drop table if exists Ticket CASCADE 
drop table if exists Ticket_tags CASCADE 
drop table if exists User CASCADE 
drop sequence hibernate_sequence if exists
create sequence hibernate_sequence start with 1 increment by 1
create table Message (id bigint not null, content varchar(255), date timestamp, relatedTicket_id bigint, sender_id bigint, primary key (id))
create table Ticket (id bigint not null, closingDate timestamp, creationDate timestamp, description varchar(255), status varchar(255), title varchar(255), assignee_id bigint, reporter_id bigint, primary key (id))
create table Ticket_tags (Ticket_id bigint not null, tags varchar(255))
create table User (id bigint not null, name varchar(255), registrationDate date, primary key (id))
alter table Message add constraint FKhdgisnj2in5hn1n2yuldo2w14 foreign key (relatedTicket_id) references Ticket
alter table Message add constraint FKcrnfc5k5lxdfurq3b97o52dnv foreign key (sender_id) references User
alter table Ticket add constraint FKntskyed7i8bg5tlegidku3i95 foreign key (assignee_id) references User
alter table Ticket add constraint FKs7n7hwlga5n5f2an052lkv1st foreign key (reporter_id) references User
alter table Ticket_tags add constraint FKjn4gvkvm2yfq6c901vmwl55j8 foreign key (Ticket_id) references Ticket
INSERT INTO USER VALUES(1,'Tristan','2023-03-11')
INSERT INTO USER VALUES(2,'Julien','2023-03-11')
INSERT INTO USER VALUES(3,'Johan','2023-03-11')
INSERT INTO TICKET VALUES(4,NULL,'2023-03-11 17:19:50.774000','Ajout d''un dashboard sur l''\u00e9cran d''accueil','TO_DO','Ajout dashboard',2,1)
INSERT INTO TICKET VALUES(5,NULL,'2023-03-11 17:19:50.774000','Bug lors du chargement des utilisateurs','TO_DO','Bug',3,1)
INSERT INTO TICKET VALUES(6,NULL,'2023-03-11 17:19:50.774000','Migration vers Angular15','TO_DO','Migration',NULL,1)
INSERT INTO MESSAGE VALUES(7,'L''erreur vient-elle du back ou du front ?','2023-03-11 17:19:50.782000',5,3)
INSERT INTO MESSAGE VALUES(8,'Ca peut-\u00eatre les deux, a vous de trouver','2023-03-11 17:19:50.782000',5,1)
INSERT INTO MESSAGE VALUES(9,'D''accord !','2023-03-11 17:19:50.782000',5,3)
INSERT INTO MESSAGE VALUES(10,'Peut-on passer directement de Angular12 \u00e0 15 ?','2023-03-11 17:19:50.782000',6,2)
INSERT INTO MESSAGE VALUES(11,'Non, il faut passer les versions une par une','2023-03-11 17:19:50.782000',6,1)
INSERT INTO MESSAGE VALUES(12,'Ca marche !','2023-03-11 17:19:50.782000',6,2)
INSERT INTO TICKET_TAGS VALUES(4,'TECH')
INSERT INTO TICKET_TAGS VALUES(4,'FEATURE')
INSERT INTO TICKET_TAGS VALUES(5,'BUG')
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 13
COMMIT
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
DISCONNECT
